# Moore's Command Editor - システムパターン

## アーキテクチャ概要
Moore's Command Editorは、React+TypeScriptをフロントエンド、Tauriをネイティブブリッジとして使用する、モダンなデスクトップアプリケーションです。アーキテクチャは以下の主要コンポーネントで構成されています：

```
フロントエンド (React) ↔ Tauri ブリッジ ↔ システムファイル操作
```

## 主要コンポーネント構造
```
src/
 ├── components/         - UIコンポーネント
 │   ├── dnd/           - ドラッグ＆ドロップ機能
 │   ├── layout/        - レイアウト構造
 │   ├── skit/          - スキット関連コンポーネント
 │   └── ui/            - 基本UIコンポーネント（shadcn/ui）
 ├── hooks/             - カスタムReactフック
 ├── lib/               - ユーティリティライブラリ
 ├── skits/             - スキットデータ
 ├── store/             - 状態管理
 ├── types/             - 型定義
 └── utils/             - ユーティリティ関数
```

## デザインパターン
1. **コンポーネントベースのアーキテクチャ**
   - 再利用可能なUIコンポーネントを中心に設計
   - Reactの関数コンポーネントとフックを活用

2. **ドラッグ＆ドロップパターン**
   - カスタムDnD実装によるコマンド操作
   - SortableListとDropZoneの連携

3. **ストア管理**
   - 中央集権的な状態管理
   - スキットデータとコマンドデータの管理

4. **バリデーションパターン**
   - コマンドとスキットに対するリアルタイムバリデーション
   - エラーと警告の視覚的フィードバック

5. **ファイルシステム抽象化**
   - デベロップメント用とプロダクション用の異なるファイルシステム実装
   - Tauriを通じたネイティブファイルアクセス

## データフロー
1. ユーザーインタラクション → UIコンポーネント
2. コンポーネント → ストア（状態更新）
3. ストア → データ処理（バリデーションなど）
4. 処理済みデータ → ファイルシステム（保存）

## クリティカルパス
- コマンド編集 → バリデーション → 状態更新 → UI更新
- コマンドドロップ → リスト更新 → 状態更新 → ファイル保存
- スキット選択 → ファイル読み込み → 状態更新 → コマンドリスト表示

## テスト戦略
- コンポーネントの単体テスト
- ストアロジックのテスト
- バリデーション機能のテスト
- エンドツーエンドテスト（Playwright）